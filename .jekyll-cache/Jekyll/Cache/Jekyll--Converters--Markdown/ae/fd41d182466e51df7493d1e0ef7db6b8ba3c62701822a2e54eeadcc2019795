I"ãW<!-- TOC -->

<ul>
  <li><a href="#ä¸€-ç¯å¢ƒå‡†å¤‡">ä¸€. ç¯å¢ƒå‡†å¤‡</a></li>
  <li><a href="#äºŒ-è¿æ¥æœ¬åœ°å›¾æ•°æ®åº“">äºŒ. è¿æ¥æœ¬åœ°å›¾æ•°æ®åº“</a>
    <ul>
      <li><a href="#21-neo4jæ•°æ®åº“è¯­æ³•cypher">2.1 Neo4jæ•°æ®åº“è¯­æ³•Cypher</a></li>
      <li><a href="#22-å›¾æ•°æ®åº“çš„åŸºæœ¬æ“ä½œpy">2.2 å›¾æ•°æ®åº“çš„åŸºæœ¬æ“ä½œpy</a></li>
    </ul>
  </li>
  <li><a href="#ä¸‰-ä¸­å¿ƒæ€§ç®—æ³•å®éªŒç¤¾åŒºç®—æ³•">ä¸‰. ä¸­å¿ƒæ€§ç®—æ³•å®éªŒï¼ˆç¤¾åŒºç®—æ³•ï¼‰</a>
    <ul>
      <li><a href="#31-ä¸­å¿ƒæ€§ç®—æ³•">3.1 ä¸­å¿ƒæ€§ç®—æ³•</a></li>
      <li><a href="#32-pagerank-ç®—æ³•">3.2 PageRank ç®—æ³•</a></li>
    </ul>
  </li>
</ul>

<!-- /TOC -->

<h3 id="ä¸€-ç¯å¢ƒå‡†å¤‡">ä¸€. ç¯å¢ƒå‡†å¤‡</h3>

<ul>
  <li>
    <p>neo4j pythonåŒ…ï¼š<code class="language-plaintext highlighter-rouge">pip3 install neo4j</code>  å’Œ<code class="language-plaintext highlighter-rouge">pip3 install py2neo</code>ï¼ˆè¿™é‡Œçš„py2neo æ˜¯pythonå¯¹Neo4jçš„é©±åŠ¨åº“,åŒæ—¶è¿™é‡Œå¿…é¡»æ˜¯py2neoç‰ˆæœ¬å¿…é¡»æ˜¯æœ€æ–°ç‰ˆ4ï¼Œä¸ç„¶ä¼šæŠ¥è¿æ¥æ•°æ®åº“çš„é”™è¯¯ï¼Œè€ç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜ï¼‰</p>
  </li>
  <li>
    <p>Java8ï¼šè¿™é‡Œç”±äºneo4j æ•°æ®åº“æ˜¯ä¾èµ–äºjava8çš„ã€‚</p>
  </li>
  <li>
    <p><a href="[ftp://neo4j.55555.io/neo4j-chs/3.5.14/](ftp://neo4j.55555.io/neo4j-chs/3.5.14/)">Neo4j_3.5.14</a>ï¼šè¿™é‡Œç”±äºneo4j åœ¨ä¸­å›½åœ°åŒºä¸‹è½½æ…¢ï¼Œå¹¶ä¸”neo4j3.Xç‰ˆæœ¬æ‰æ”¯æŒjava8ï¼Œåˆ°4.0ç‰ˆæœ¬å°±æ˜¯éœ€è¦java11äº†ã€‚</p>
  </li>
  <li>
    <p><a href="[ftp://neo4j.55555.io/neo4j-desktop/1.2.4/](ftp://neo4j.55555.io/neo4j-desktop/1.2.4/)">Neo4j_Desktop</a>ï¼šneo4jçš„æ¡Œé¢ç«¯ï¼ˆå¯ä»¥è¿œç¨‹æ•°æ®åº“å’Œè¿æ¥æœ¬åœ°æ•°æ®åº“ï¼ŒåŒæ—¶åŒ…å«å¾ˆå¤šé¢å¤–çš„æ‰©å±•ï¼‰</p>
  </li>
</ul>

<h3 id="äºŒ-è¿æ¥æœ¬åœ°å›¾æ•°æ®åº“">äºŒ. è¿æ¥æœ¬åœ°å›¾æ•°æ®åº“</h3>

<blockquote>
  <p>py2neo V4 å®˜æ–¹æ–‡æ¡£ï¼šhttps://py2neo.org/v4/index.html</p>
</blockquote>

<p>Neo4j ä¸€å…±æœ‰3ç§è¿æ¥æ–¹å¼ï¼š</p>

<ul>
  <li>Boltï¼šbolt://localhost:11005</li>
  <li>HTTPï¼šhttp://localhost:11006</li>
  <li>HTTPSï¼šhttps://localhost:11007</li>
</ul>

<p>è¿™é‡Œå¯ä»¥é€šè¿‡Neo4j Desktopæ¥æŸ¥çœ‹æ–°å»ºçš„å›¾æ•°æ®åº“ï¼ˆåŒæ—¶è®¾ç½®å¯†ç ï¼‰</p>

<h4 id="21-neo4jæ•°æ®åº“è¯­æ³•cypher">2.1 Neo4jæ•°æ®åº“è¯­æ³•Cypher</h4>

<ul>
  <li>åˆ›å»º
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>create (:Movie {title:"ABC",released:2016})  return p;
</code></pre></div>    </div>
  </li>
  <li>æŸ¥è¯¢</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>match (p: Person) return p; æŸ¥è¯¢Personç±»å‹çš„æ‰€æœ‰æ•°æ®

match (p: Person {name:"sun"}) return p; æŸ¥è¯¢åå­—ç­‰äºsunçš„äºº

match( p1: Person {name:"sun"} )-[rel:friend]-&gt;(p2) returnÂ p2.nameÂ , p2.age æŸ¥è¯¢sunçš„æœ‹å‹çš„åå­—å’Œå¹´é¾„

match (old) ... create (new) create (old)-[rel:dr]-&gt;(new) return new å¯¹å·²ç»å­˜åœ¨çš„èŠ‚ç‚¹å’Œæ–°å»ºçš„èŠ‚ç‚¹å»ºç«‹å…³ç³»
</code></pre></div></div>

<ul>
  <li>æ›´æ–°
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MERGE (m:Movie { title:"Cloud Atlas" })
ON CREATE SET m.released = 2012
RETURN m
</code></pre></div>    </div>
  </li>
  <li>ç­›é€‰è¿‡æ»¤
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>match (p1: Person)-[r:friend]-&gt;(p2: Person) 
where p1.name=~"K.+" or p2.age=24 or "neo" in r.rels 
return p1,r,p2
</code></pre></div>    </div>
  </li>
  <li>èšåˆå‡½æ•°ï¼ˆæ”¯æŒcount,sum,avg,min,maxï¼‰
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (actor:Person)-[:ACTED_IN]-&gt;(movie:Movie)&lt;-[:DIRECTED]-(director:Person)
RETURN actor,director,count(*) AS collaborations
</code></pre></div>    </div>
  </li>
  <li>æ’åºå’Œåˆ†é¡µ</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (a:Person)-[:ACTED_IN]-&gt;(m:Movie)
RETURN a,count(*) AS appearances
ORDER BY appearances DESC SKIP 3 LIMIT 10;
</code></pre></div></div>

<h4 id="22-å›¾æ•°æ®åº“çš„åŸºæœ¬æ“ä½œpy">2.2 å›¾æ•°æ®åº“çš„åŸºæœ¬æ“ä½œpy</h4>

<ul>
  <li>è¿™é‡Œæ˜¯é€šè¿‡å¯¼å…¥py2neoè¿™ä¸ªneo4jçš„ç¬¬ä¸‰æ–¹åº“æ¥è¿æ¥</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">py2neo</span> <span class="kn">import</span> <span class="n">Graph</span><span class="p">,</span><span class="n">Node</span>

<span class="n">graph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">(</span>
    <span class="s">"http://localhost:11006"</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="s">"neo4j"</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s">"yy"</span>
<span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>æ¸…ç©ºæ•°æ®åº“
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">graph</span><span class="p">.</span><span class="n">delete_all</span><span class="p">()</span>
</code></pre></div>    </div>
  </li>
  <li>å®šä¹‰èŠ‚ç‚¹å…³ç³»</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s">'Person'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'Alice'</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s">'Person'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'Bob'</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">Relationship</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s">'KNOWNS'</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">a</span> <span class="o">|</span> <span class="n">b</span> <span class="o">|</span> <span class="n">r</span>
<span class="n">graph</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>NodeæŸ¥è¯¢</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ç”¨CQLè¿›è¡ŒæŸ¥è¯¢ï¼Œè¿”å›çš„ç»“æœæ˜¯list
</span><span class="n">data1</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">data</span><span class="p">(</span><span class="s">'MATCH(p:PersonTest) return p'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"data1 = "</span><span class="p">,</span> <span class="n">data1</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">data1</span><span class="p">))</span>

<span class="c1"># ç”¨find_one()æ–¹æ³•è¿›è¡ŒnodeæŸ¥æ‰¾ï¼Œè¿”å›çš„æ˜¯æŸ¥æ‰¾nodeçš„ç¬¬ä¸€ä¸ªnode
</span><span class="n">data2</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">find_one</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'PersonTest'</span><span class="p">,</span> <span class="n">property_key</span><span class="o">=</span><span class="s">'name'</span><span class="p">,</span> <span class="n">property_value</span><span class="o">=</span><span class="s">"æå››"</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="s">"data2 = "</span><span class="p">,</span> <span class="n">data2</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">data2</span><span class="p">))</span>

<span class="c1"># ç”¨find()æ–¹æ³•è¿›è¡ŒnodeæŸ¥æ‰¾,éœ€è¦éå†è¾“å‡ºï¼Œç±»ä¼¼äºmongodb
</span><span class="n">data3</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'PersonTest'</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">data3</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="s">"data3 = "</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>å…³ç³»æŸ¥è¯¢</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">relationship</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">match_one</span><span class="p">(</span><span class="n">rel_type</span><span class="o">=</span><span class="s">'KNOWNS'</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">relationship</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">relationship</span><span class="p">))</span>
</code></pre></div></div>

<ul>
  <li>æ›´æ–°push</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">node1</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">find_one</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'PersonTest'</span><span class="p">,</span> <span class="n">property_key</span><span class="o">=</span><span class="s">'name'</span><span class="p">,</span> <span class="n">property_value</span><span class="o">=</span><span class="s">"å¼ ä¸‰"</span><span class="p">)</span>
<span class="n">node1</span><span class="p">[</span><span class="s">'age'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">21</span>
<span class="n">graph</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node1</span><span class="p">)</span>
<span class="n">data4</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'PersonTest'</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">data4</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="s">"data4 = "</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
    
<span class="c1">#åŸºäºä¸Šé¢çš„æ“ä½œï¼Œå†æ¬¡å®šä¹‰node1[â€˜ageâ€™] = 99,å¹¶æ‰§è¡Œgraph.push(node1)ï¼Œå‘ç°å·²ç»æ›´æ–°
</span>
<span class="n">node1</span><span class="p">[</span><span class="s">'age'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99</span>
<span class="n">graph</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node1</span><span class="p">)</span>
<span class="n">data5</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'PersonTest'</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">data5</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="s">"data5 = "</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>åˆ é™¤Nodeå’ŒRelationship</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">node</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">find_one</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'PersonTest'</span><span class="p">,</span> <span class="n">property_key</span><span class="o">=</span><span class="s">'name'</span><span class="p">,</span> <span class="n">property_value</span><span class="o">=</span><span class="s">"æå››"</span><span class="p">)</span>
<span class="n">relationship</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">match_one</span><span class="p">(</span><span class="n">rel_type</span><span class="o">=</span><span class="s">'KNOWNS'</span><span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="n">delete</span><span class="p">(</span><span class="n">relationship</span><span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="n">delete</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="n">data6</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'PersonTest'</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">data6</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="s">"data6 = "</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>å¤šæ¡ä»¶æŸ¥è¯¢</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s">'PersonTest'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'å¼ ä¸‰'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s">'å¹¿å·'</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s">'PersonTest'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'æå››'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">22</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s">'ä¸Šæµ·'</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s">'PersonTest'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'ç‹äº”'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s">'åŒ—äº¬'</span><span class="p">)</span>
<span class="n">r1</span> <span class="o">=</span> <span class="n">Relationship</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s">'KNOWS'</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">Relationship</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="s">'KNOWS'</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">a</span> <span class="o">|</span> <span class="n">b</span> <span class="o">|</span> <span class="n">c</span> <span class="o">|</span> <span class="n">r1</span> <span class="o">|</span> <span class="n">r2</span>
<span class="n">graph</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">data7</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'PersonTest'</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">data7</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="s">"data7 = "</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>å•æ¡ä»¶æŸ¥è¯¢</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># å•æ¡ä»¶æŸ¥è¯¢ï¼Œè¿”å›çš„æ˜¯å¤šä¸ªç»“æœ
</span><span class="n">selector</span> <span class="o">=</span> <span class="n">NodeSelector</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="n">persons</span> <span class="o">=</span> <span class="n">selector</span><span class="p">.</span><span class="n">select</span><span class="p">(</span><span class="s">'PersonTest'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">21</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"data8 = "</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">persons</span><span class="p">))</span>
</code></pre></div></div>

<ul>
  <li>å¤šæ¡ä»¶æŸ¥è¯¢</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">selector</span> <span class="o">=</span> <span class="n">NodeSelector</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="n">persons</span> <span class="o">=</span> <span class="n">selector</span><span class="p">.</span><span class="n">select</span><span class="p">(</span><span class="s">'PersonTest'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s">'å¹¿å·'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"data9 = "</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">persons</span><span class="p">))</span>
</code></pre></div></div>

<ul>
  <li>å¤æ‚æŸ¥è¯¢orderby</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># orderbyè¿›è¡Œæ›´å¤æ‚çš„æŸ¥è¯¢
</span><span class="n">selector</span> <span class="o">=</span> <span class="n">NodeSelector</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="n">persons</span> <span class="o">=</span> <span class="n">selector</span><span class="p">.</span><span class="n">select</span><span class="p">(</span><span class="s">'PersonTest'</span><span class="p">).</span><span class="n">order_by</span><span class="p">(</span><span class="s">'_.age'</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">persons</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="s">"data10 = "</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="ä¸‰-ä¸­å¿ƒæ€§ç®—æ³•å®éªŒç¤¾åŒºç®—æ³•">ä¸‰. ä¸­å¿ƒæ€§ç®—æ³•å®éªŒï¼ˆç¤¾åŒºç®—æ³•ï¼‰</h3>
<h4 id="31-ä¸­å¿ƒæ€§ç®—æ³•">3.1 ä¸­å¿ƒæ€§ç®—æ³•</h4>

<ul>
  <li>åº¦ä¸­å¿ƒæ€§ï¼šåº¦ä¸­å¿ƒæ€§æ˜¯æœ€ç®€å•åº¦é‡ï¼Œå³ä¸ºæŸä¸ªèŠ‚ç‚¹åœ¨ç½‘ç»œä¸­çš„è”ç»“æ•°ã€‚
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (c:Character)-[:INTERACTS]-()
RETURN c.name AS character, count(*) AS degree ORDER BY degree DESC
</code></pre></div>    </div>
  </li>
  <li>åŠ æƒåº¦ä¸­å¿ƒæ€§ï¼šæŒ‡çš„æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„æƒé‡åçš„ä¸­å¿ƒæ€§
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (c:Character)-[r:INTERACTS]-()
RETURN c.name AS character, sum(r.weight) AS weightedDegree ORDER BY weightedDegree DESC
</code></pre></div>    </div>
  </li>
  <li>ä»‹æ•°ä¸­å¿ƒæ€§:åœ¨ç½‘ç»œä¸­ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„ä»‹æ•°ä¸­å¿ƒæ€§æ˜¯æŒ‡å…¶å®ƒä¸¤ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰æœ€çŸ­è·¯å¾„éƒ½ç»è¿‡è¿™ä¸ªèŠ‚ç‚¹ï¼Œåˆ™è¿™äº›æ‰€æœ‰æœ€çŸ­è·¯å¾„æ•°å³ä¸ºæ­¤èŠ‚ç‚¹çš„ä»‹æ•°ä¸­å¿ƒæ€§ã€‚</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (c:Character)
WITH collect(c) AS characters
CALL apoc.algo.betweenness(['INTERACTS'], characters, 'BOTH') YIELD node, score
SET node.betweenness = score
RETURN node.name AS name, score ORDER BY score DESC
</code></pre></div></div>

<ul>
  <li>ç´§å¯†åº¦ä¸­å¿ƒæ€§ï¼šæŒ‡åˆ°ç½‘ç»œä¸­æ‰€æœ‰å…¶ä»–è§’è‰²çš„å¹³å‡è·ç¦»çš„å€’æ•°ã€‚
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (c:Character)
WITH collect(c) AS characters
CALL apoc.algo.closeness(['INTERACTS'], characters, 'BOTH') YIELD node, score
RETURN node.name AS name, score ORDER BY score DESC
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="32-pagerank-ç®—æ³•">3.2 PageRank ç®—æ³•</h4>
<p>PageRankç®—æ³•æºè‡ªGoogleçš„ç½‘é¡µæ’åã€‚å®ƒæ˜¯ä¸€ç§ç‰¹å¾å‘é‡ä¸­å¿ƒæ€§(eigenvector centrality)ç®—æ³•ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UNWIND {nodes} AS n
MATCH (c:Character) WHERE c.name = n.name
SET c.pagerank = n.pg
</code></pre></div></div>

<p>å¯ä»¥åœ¨Neo4jçš„å›¾ä¸­æŸ¥è¯¢æœ€é«˜PageRankå€¼çš„èŠ‚ç‚¹ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (n:Character)
RETURN n.name AS name, n.pagerank AS pagerank ORDER BY pagerank DESC LIMIT 10
</code></pre></div></div>
:ET